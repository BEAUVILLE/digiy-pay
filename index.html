<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DIGIY PAY ‚ôæÔ∏è</title>
<style>
body{
margin:0;
font-family:system-ui;
background:linear-gradient(135deg,#020617,#064e3b);
color:#fff;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
}
.card{
background:#020818;
border-radius:22px;
padding:20px;
max-width:420px;
width:95%;
border:1px solid #134e4a;
box-shadow:0 15px 40px rgba(0,0,0,.45);
text-align:center;
}
h1{color:#22c55e;margin-bottom:6px}
.name{font-size:20px;font-weight:900;margin-top:6px;color:#facc15}
.btn{
display:block;
margin-top:14px;
padding:12px;
border-radius:999px;
font-weight:900;
text-decoration:none;
background:#22c55e;
color:#022c22;
}
.small{font-size:13px;opacity:.8;margin-top:10px}
</style>
</head>
<body>
<div class="card">
<h1>DIGIY PAY</h1>
<div id="proName" class="name">Chargement‚Ä¶</div>
<a id="waveBtn" class="btn" target="_blank">üí∞ Payer avec Wave</a>
<div class="small">Paiement direct au professionnel ‚Ä¢ DIGIY = 0% commission</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const sb = supabase.createClient(
"https://wesqmwjjtsefyjnluosj.supabase.co",
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
);

const params = new URLSearchParams(window.location.search);
const code = params.get("pro");

async function load(){
if(!code){
document.getElementById("proName").innerText="QR invalide";
return;
}

const {data} = await sb
.from("digiy_pay_pro")
.select("*")
.eq("business_code",code)
.single();

if(!data){
document.getElementById("proName").innerText="Professionnel introuvable";
return;
}

document.getElementById("proName").innerText=data.business_name;
document.getElementById("waveBtn").href="https://wave.com/pay/"+data.wave_phone;
}

load();
</script>
</body>
</html>
